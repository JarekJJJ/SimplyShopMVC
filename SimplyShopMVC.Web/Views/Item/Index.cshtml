@model SimplyShopMVC.Application.ViewModels.Front.ListItemShopIndexVm
@{
    ViewData["Title"] = "HKR24.pl - Shop index site";
}
@{
    var mainCategories = Model.categories.Where(i => i.IsMainCategory == true);
}
<div class="row mt-2">
    <div class="col-md-12 d-flex justify-content-center">
        <p class="d-inline-flex gap-1 mt-1">
            <a class="link-dark link-offset-2 link-underline-opacity-0 link-underline-opacity-100-hover" data-bs-toggle="collapse" href="#listCategories" role="button" aria-expanded="false" aria-controls="listCategories">
                <span class="text-center h5 "> Wyświetl kategorie </span>
            </a>
    </div>
    <div class="col-md-12">
        <div class="row collapse" id="listCategories">
            @foreach (var mainCategory in mainCategories)
            {
                <div class="col-md-3">
                    <div class="pt-2 pb-1 h5">@mainCategory.Name</div>
                    @{
                        var subCategory = Model.categories.Where(i => i.MainCategoryId == mainCategory.Id);
                    }
                    @foreach (var subCat in subCategory)
                    {
                        <div class="h7">  <span class="">@Html.ActionLink(subCat.Name,"Index", new {selectedCategory=subCat.Id}, new{@class="link-offset-2 link-underline link-underline-opacity-0"})</span> </div>
                    }
                </div>


            }
        </div>
    </div>

</div>
<div class="row mt-2">
    <div class="col-md-12">
    </div>
</div>
<form asp-action="Index" method="post">
    <div class="row mt-2 d-flex">
        <div class="col-md-4 d-flex">
            <div class="col-md-8 m-1">
                <input type="hidden" asp-for="selectedCategory" value="@Model.selectedCategory" />
                <input class="form-control" type="search" placeholder="Search" aria-label="Search" asp-for="searchItem">
            </div>
            <div class="col-md-3 m-1">
                <button class="btn btn-outline-success" type="submit">Wyszukaj</button>
            </div>
        </div>
        <div class="col-md-8 d-flex justify-content-end text-info">
            <div class="col-md-1 d-flex justify-content-center align-items-center pt-2">
                <a class="icon-link h2 border text-center align-middle" href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z" />
                        <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z" />
                        <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z" />
                    </svg>
                </a>
            </div>
        </div>

    </div>

    <div class="row mt-2">
        <div class="col-md-12">
            <table class="table table-striped mt-2">
                <tr>
                    <th>Nazwa towaru</th>
                    <th>dostępna ilość</th>
                    <th>cena brutto</th>
                    <th>czas dostawy</th>
                    <th>szczegóły</th>
                </tr>


                @foreach (var sItem in Model.categoryItems)
                {
                    <tr>
                        <td>@sItem.name</td>
                        <td>@sItem.quantity</td>
                        <td>@sItem.priceB.ToString("N2")</td>
                        <td>@sItem.deliveryTime</td>
                        <td> <div class="h7">  <span class="">@Html.ActionLink("szczegóły","DetailItem", new {selectedItem=sItem.id}, new{@class="link-offset-2 link-underline link-underline-opacity-0"})</span> </div></td>
                    </tr>
                }
            </table>
        </div>
    </div>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li class="page-item">
                <a class="page-link" href="javascript:PageClick(@Model.currentPage-1)">Wstecz</a>
            </li>
            @for (int i = 1; i < Math.Ceiling((double)Model.count / (double)Model.pageSize) + 1; i++)
            {
                if (i == Model.currentPage)
                {
                    <li class="page-item active" aria-current="page">
                        <span class="page-link">@i</span>
                    </li>
                }
                else
                {
                    <li class="page-item"><a class="page-link" href="javascript:PageClick(@i)">@i</a></li>
                }
            }
            <li class="page-item">
                <a class="page-link" href="javascript:PageClick(@Model.currentPage+1)">Dalej</a>
            </li>
        </ul>
    </nav>
    <input type="hidden" name="pageNo" id="pageNo" />
    <input type="hidden" name="pageSize" id="pageSize" value="10" />

</form>
@section Scripts
    {
    <script type="text/javascript">
        function PageClick(index) {
            document.getElementById("pageNo").value = index;
            document.forms[0].submit();
        }
    </script>

}

